<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TODO DE DAVID</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
      
      body {
        font-family: 'Inter', sans-serif;
      }
      
      .animated-gradient {
        background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe);
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
      }
      
      @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      .glass-effect {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .hover-lift {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .hover-lift:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }
      
      .logo-shine {
        position: relative;
        overflow: hidden;
      }
      
      .logo-shine::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
        animation: shine 3s infinite;
      }
      
      @keyframes shine {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
      }

      /* Menu mobile */
      .mobile-menu {
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
      }

      .mobile-menu.active {
        transform: translateX(0);
      }

      .menu-overlay {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease-in-out;
      }

      .menu-overlay.active {
        opacity: 1;
        pointer-events: auto;
      }
    </style>
  </head>

  <body class="min-h-screen flex flex-col bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
    <!-- HEADER -->
    <header class="animated-gradient text-white shadow-2xl relative overflow-hidden">
      <!-- Effet de fond dÃ©coratif -->
      <div class="absolute inset-0 opacity-10">
        <div class="absolute top-0 left-1/4 w-64 h-64 sm:w-96 sm:h-96 bg-white rounded-full filter blur-3xl"></div>
        <div class="absolute bottom-0 right-1/4 w-64 h-64 sm:w-96 sm:h-96 bg-purple-300 rounded-full filter blur-3xl"></div>
      </div>
      
      <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-5 flex items-center justify-between relative z-10">
        <!-- Logo / Titre -->
        <div class="flex items-center space-x-2 sm:space-x-4">
          <div class="logo-shine w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-xl sm:rounded-2xl bg-white shadow-xl">
            <span class="text-xl sm:text-2xl font-black bg-gradient-to-br from-purple-600 to-blue-600 bg-clip-text text-transparent">
              TD
            </span>
          </div>
          <a href="{% url 'list_task' %}" class="group">
            <h1 class="text-lg sm:text-2xl font-black tracking-tight group-hover:scale-105 transition-transform">
              TODO DE DAVID
              <span class="hidden sm:block text-xs font-normal text-white/80 tracking-wide mt-0.5">Organisez votre journÃ©e</span>
            </h1>
          </a>
        </div>

        <!-- Navigation Desktop -->
        <nav class="hidden lg:flex items-center space-x-3">
          {% if user.is_authenticated %}

          <!-- Lien Mes tÃ¢ches -->
          <a
            href="{% url 'list_task' %}"
            class="glass-effect hover-lift px-5 py-2.5 rounded-xl text-sm font-semibold transition shadow-lg"
          >
            ğŸ“‹ Mes tÃ¢ches
          </a>

          <!-- Profil -->
          <a
            href="{% url 'profil' %}"
            class="flex items-center gap-3 px-5 py-2.5 bg-white text-purple-700 rounded-xl hover:bg-gradient-to-r hover:from-white hover:to-purple-50 transition shadow-lg hover-lift text-sm font-semibold"
          >
            <div class="relative">
              <img
                src="https://ui-avatars.com/api/?name={{ user.first_name }}+{{ user.last_name }}&background=667eea&color=fff&size=128&bold=true"
                class="w-8 h-8 rounded-full ring-2 ring-white/50"
              />
              <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-400 rounded-full border-2 border-white"></span>
            </div>
            <span class="font-semibold">
              {{ user.first_name|default:user.username }}
            </span>
          </a>

          <!-- DÃ©connexion -->
          <a
            href="{% url 'logout_user' %}"
            class="px-5 py-2.5 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 rounded-xl text-sm font-semibold transition shadow-lg hover-lift"
          >
            ğŸšª DÃ©connexion
          </a>

          {% else %}

          <!-- Connexion -->
          <a
            href="{% url 'login_user' %}"
            class="px-5 py-2.5 bg-white text-purple-600 hover:bg-gradient-to-r hover:from-white hover:to-purple-50 rounded-xl text-sm font-semibold transition shadow-lg hover-lift"
          >
            ğŸ”‘ Connexion
          </a>

          <!-- Inscription -->
          <a
            href="{% url 'signin_user' %}"
            class="px-5 py-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-sm font-semibold transition shadow-lg hover-lift backdrop-blur-sm border border-white/30"
          >
            âœ¨ CrÃ©er un compte
          </a>

          {% endif %}
        </nav>

        <!-- Burger Menu Button (Mobile) -->
        <button 
          id="menuButton"
          class="lg:hidden flex flex-col gap-1.5 w-10 h-10 items-center justify-center rounded-xl glass-effect hover-lift"
          aria-label="Menu"
        >
          <span class="w-6 h-0.5 bg-white rounded-full transition-all"></span>
          <span class="w-6 h-0.5 bg-white rounded-full transition-all"></span>
          <span class="w-6 h-0.5 bg-white rounded-full transition-all"></span>
        </button>
      </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="menuOverlay" class="menu-overlay fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden"></div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu fixed top-0 right-0 bottom-0 w-full sm:w-80 bg-white shadow-2xl z-50 lg:hidden overflow-y-auto">
      <div class="p-6">
        <!-- Close Button -->
        <div class="flex justify-between items-center mb-8">
          <h2 class="text-xl font-black bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
            Menu
          </h2>
          <button 
            id="closeMenuButton"
            class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 hover:bg-slate-200 transition"
            aria-label="Fermer"
          >
            <span class="text-2xl text-slate-600">âœ•</span>
          </button>
        </div>

        <!-- Mobile Navigation -->
        <nav class="space-y-3">
          {% if user.is_authenticated %}

          <!-- Profil (Mobile) -->
          <a
            href="{% url 'profil' %}"
            class="flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl hover:from-purple-100 hover:to-blue-100 transition"
          >
            <div class="relative">
              <img
                src="https://ui-avatars.com/api/?name={{ user.first_name }}+{{ user.last_name }}&background=667eea&color=fff&size=128&bold=true"
                class="w-10 h-10 rounded-full ring-2 ring-purple-200"
              />
              <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"></span>
            </div>
            <div>
              <p class="font-bold text-slate-800">{{ user.first_name|default:user.username }}</p>
              <p class="text-xs text-slate-500">Voir le profil</p>
            </div>
          </a>

          <div class="border-t border-slate-200 my-4"></div>

          <!-- Mes tÃ¢ches (Mobile) -->
          <a
            href="{% url 'list_task' %}"
            class="flex items-center gap-3 px-4 py-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition text-slate-700 font-semibold"
          >
            <span class="text-xl">ğŸ“‹</span>
            <span>Mes tÃ¢ches</span>
          </a>

          <!-- DÃ©connexion (Mobile) -->
          <a
            href="{% url 'logout_user' %}"
            class="flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl hover:from-red-100 hover:to-pink-100 transition text-red-600 font-semibold"
          >
            <span class="text-xl">ğŸšª</span>
            <span>DÃ©connexion</span>
          </a>

          {% else %}

          <!-- Connexion (Mobile) -->
          <a
            href="{% url 'login_user' %}"
            class="flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl hover:from-purple-700 hover:to-blue-700 transition text-white font-semibold shadow-lg"
          >
            <span class="text-xl">ğŸ”‘</span>
            <span>Connexion</span>
          </a>

          <!-- Inscription (Mobile) -->
          <a
            href="{% url 'signin_user' %}"
            class="flex items-center gap-3 px-4 py-3 bg-slate-100 rounded-xl hover:bg-slate-200 transition text-slate-700 font-semibold"
          >
            <span class="text-xl">âœ¨</span>
            <span>CrÃ©er un compte</span>
          </a>

          {% endif %}
        </nav>

        <!-- Footer dans le menu mobile -->
        <div class="mt-8 pt-6 border-t border-slate-200">
          <p class="text-xs text-slate-500 text-center">
            Â© {{ now|date:"Y" }} TODO DE DAVID
          </p>
        </div>
      </div>
    </div>

    <!-- CONTENT -->
    <main class="flex-grow">{% block content %} {% endblock %}</main>

    <!-- FOOTER -->
    <footer class="bg-white/80 backdrop-blur-sm border-t border-slate-200 mt-10 shadow-inner">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4 sm:gap-6">
          <div class="text-center md:text-left">
            <p class="text-sm sm:text-base text-slate-700 font-bold mb-1 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
              TODO DE DAVID
            </p>
            <p class="text-slate-500 text-xs sm:text-sm">
              Â© {{ now|date:"Y" }} Tous droits rÃ©servÃ©s.
            </p>
          </div>
          
          <div class="flex items-center space-x-4 sm:space-x-8">
            <a
              href="#"
              class="text-xs sm:text-sm text-slate-600 hover:text-purple-600 transition font-medium hover:scale-110 transform inline-flex items-center gap-1"
            >
              <span class="text-sm sm:text-base">ğŸ“–</span>
              <span>Ã€ propos</span>
            </a>
            <a
              href="#"
              class="text-xs sm:text-sm text-slate-600 hover:text-purple-600 transition font-medium hover:scale-110 transform inline-flex items-center gap-1"
            >
              <span class="text-sm sm:text-base">ğŸ“§</span>
              <span>Contact</span>
            </a>
            <a
              href="#"
              class="text-xs sm:text-sm text-slate-600 hover:text-purple-600 transition font-medium hover:scale-110 transform inline-flex items-center gap-1"
            >
              <span class="text-sm sm:text-base">ğŸ”’</span>
              <span class="hidden sm:inline">Politique</span>
            </a>
          </div>
        </div>
        
        <div class="mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-slate-200 text-center">
          <p class="text-xs text-slate-500">
            Fait avec <span class="text-red-500 animate-pulse">â¤ï¸</span> pour une meilleure productivitÃ©
          </p>
        </div>
      </div>
    </footer>

    <!-- Script pour le menu mobile -->
    <script>
      const menuButton = document.getElementById('menuButton');
      const closeMenuButton = document.getElementById('closeMenuButton');
      const mobileMenu = document.getElementById('mobileMenu');
      const menuOverlay = document.getElementById('menuOverlay');

      function openMenu() {
        mobileMenu.classList.add('active');
        menuOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
      }

      function closeMenu() {
        mobileMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
        document.body.style.overflow = '';
      }

      menuButton.addEventListener('click', openMenu);
      closeMenuButton.addEventListener('click', closeMenu);
      menuOverlay.addEventListener('click', closeMenu);

      // Fermer le menu avec la touche Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeMenu();
        }
      });
    </script>
  </body>
</html>