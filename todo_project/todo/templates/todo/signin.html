{% extends "todo/base.html" %} 
{% load static %} 

{% block content %}
<style>
  .signup-container {
    animation: fadeInUp 0.6s ease-out;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .input-field {
    transition: all 0.3s ease;
  }
  
  .input-field:focus {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
  }
  
  .btn-submit {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 24px rgba(102, 126, 234, 0.4);
  }
  
  .btn-submit::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }
  
  .btn-submit:hover::before {
    width: 300px;
    height: 300px;
  }
  
  .floating-shape {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.5;
    animation: float 6s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
  }
  
  .alert-error {
    animation: shake 0.5s ease-in-out;
  }
  
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }
  
  .form-step {
    animation: slideIn 0.4s ease-out;
  }
  
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  .progress-bar {
    transition: width 0.3s ease;
  }
</style>

<div class="min-h-[85vh] flex items-center justify-center relative overflow-hidden py-12 px-4">
  <!-- Formes flottantes d√©coratives -->
  <div class="floating-shape w-72 h-72 bg-indigo-400 absolute top-20 -left-20" style="animation-delay: 0s;"></div>
  <div class="floating-shape w-96 h-96 bg-purple-400 absolute bottom-20 -right-20" style="animation-delay: 2s;"></div>
  <div class="floating-shape w-64 h-64 bg-pink-400 absolute top-1/2 left-1/3" style="animation-delay: 4s;"></div>

  <div class="signup-container w-full max-w-2xl relative z-10">
    <!-- Card principale -->
    <div class="bg-white/90 backdrop-blur-xl p-10 rounded-3xl shadow-2xl border border-white/20">
      
      <!-- Logo/Icon -->
      <div class="flex justify-center mb-6">
        <div class="w-20 h-20 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl transform hover:rotate-12 transition-transform">
          <span class="text-4xl">‚ú®</span>
        </div>
      </div>

      <!-- Titre -->
      <h2 class="text-3xl font-black text-center bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2">
        Cr√©er un compte
      </h2>
      <p class="text-center text-slate-600 mb-8 text-sm">
        Rejoignez-nous et commencez √† organiser vos t√¢ches
      </p>

      <!-- Messages d'erreur Django -->
      {% if messages %}
      <div class="mb-6 space-y-2">
        {% for message in messages %}
        <div class="alert-error bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3">
          <span class="text-xl">‚ö†Ô∏è</span>
          <p class="text-sm font-semibold">{{ message }}</p>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Erreurs du formulaire -->
      {% if form.errors %}
      <div class="alert-error mb-6 bg-gradient-to-r from-red-500 to-pink-500 text-white px-5 py-4 rounded-xl shadow-lg">
        <div class="flex items-start gap-3">
          <span class="text-2xl">üö´</span>
          <div class="flex-1">
            <p class="font-bold mb-2">Erreurs d√©tect√©es :</p>
            <ul class="space-y-1 text-sm">
              {% for field in form %} 
                {% for error in field.errors %}
                <li class="flex items-start gap-2">
                  <span>‚Ä¢</span>
                  <span>{{ error }}</span>
                </li>
                {% endfor %} 
              {% endfor %} 
              {% for error in form.non_field_errors %}
              <li class="flex items-start gap-2">
                <span>‚Ä¢</span>
                <span>{{ error }}</span>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      {% endif %}

      <!-- Formulaire -->
      <form method="POST" action="" class="space-y-5">
        {% csrf_token %}
        
        <!-- Grid pour les champs -->
        <div class="grid md:grid-cols-2 gap-5">
          <!-- Nom -->
          <div class="form-step">
            <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
              <span>üë§</span>
              <span>Nom</span>
            </label>
            <input
              name="last_name"
              type="text"
              required
              class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
              placeholder="Ex : KOKA"
            />
          </div>

          <!-- Pr√©nom -->
          <div class="form-step" style="animation-delay: 0.05s;">
            <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
              <span>üë§</span>
              <span>Pr√©nom(s)</span>
            </label>
            <input
              name="first_name"
              type="text"
              required
              class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
              placeholder="Ex : Essowaba David"
            />
          </div>
        </div>

        <!-- Nom d'utilisateur -->
        <div class="form-step" style="animation-delay: 0.1s;">
          <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
            <span>üÜî</span>
            <span>Nom d'utilisateur</span>
          </label>
          <input
            name="username"
            type="text"
            required
            class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
            placeholder="Ex : devDav"
          />
        </div>

        <div class="grid md:grid-cols-2 gap-5">
          <!-- Email -->
          <div class="form-step" style="animation-delay: 0.15s;">
            <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
              <span>üìß</span>
              <span>Email</span>
            </label>
            <input
              name="email"
              type="email"
              required
              class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
              placeholder="exemple@mail.com"
            />
          </div>

          <!-- T√©l√©phone -->
          <div class="form-step" style="animation-delay: 0.2s;">
            <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
              <span>üì±</span>
              <span>Num√©ro de t√©l√©phone</span>
            </label>
            <input
              name="phone"
              type="text"
              required
              class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
              placeholder="Ex : 71254851"
            />
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-5">
          <!-- Mot de passe -->
          <div class="form-step" style="animation-delay: 0.25s;">
            <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
              <span>üîë</span>
              <span>Mot de passe</span>
            </label>
            <input
              name="password1"
              type="password"
              required
              class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            />
          </div>

          <!-- Confirmation -->
          <div class="form-step" style="animation-delay: 0.3s;">
            <label class="block mb-2 font-semibold text-slate-700 text-sm flex items-center gap-2">
              <span>üîê</span>
              <span>Confirmez le mot de passe</span>
            </label>
            <input
              name="password2"
              type="password"
              required
              class="input-field w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 focus:outline-none transition-all"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            />
          </div>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn-submit w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-bold text-lg shadow-lg relative overflow-hidden mt-6"
        >
          <span class="relative z-10 flex items-center justify-center gap-2">
            <span>‚ú®</span>
            <span>Cr√©er mon compte</span>
          </span>
        </button>

        <!-- Divider -->
        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-slate-200"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-white text-slate-500 font-medium">ou</span>
          </div>
        </div>

        <!-- Connexion -->
        <div class="text-center">
          <p class="text-slate-600 mb-3">
            Vous avez d√©j√† un compte ?
          </p>
          <a
            href="{% url 'login_user' %}"
            class="inline-flex items-center gap-2 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all hover:scale-105 shadow-md"
          >
            <span>üîë</span>
            <span>Se connecter</span>
          </a>
        </div>
      </form>
    </div>

    <!-- Info s√©curit√© -->
    <div class="mt-6 text-center">
      <p class="text-sm text-slate-500 flex items-center justify-center gap-2">
        <span>üîí</span>
        <span>Vos donn√©es sont s√©curis√©es et chiffr√©es</span>
      </p>
    </div>
  </div>
</div>
{% endblock %}